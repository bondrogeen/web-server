local a={ssid="ESP-"..string.format("%x",node.chipid()*256):sub(0,6):upper(),pwd="",auth=false,mode=3,login="admin",pass="0000"}local function b(c,d)local e,f=pcall(sjson.encode,d)if f and file.open(c,"w")then file.write(f)file.close()end end;local function g(h)local i,f;if file.open(h,"r")then i,f=pcall(sjson.decode,file.read())file.close()end;return i and f end;local function j(k)local l,m=k==1 and g("setting.json")m=l or a;if not settings then b("setting.json",m)end;m.token=tostring(node.random(100000))return m end;local function n(o)local p=g(o.Fname)if p then for q,k in pairs(p)do p[q]=o[q]==nil and k or o[q]end;b(o.Fname,p)return true end;return false end;return function(o)local r;if type(o)=="table"then if o.list then r=file.list()end;if o.init then r=g(o.init)end;if o.save then r=n(o.save)end;if o.def then r=j(o.def)end end;return r end
